{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import{auth,db}from\"../firebase/firebase\";import{addDoc,collection,serverTimestamp}from\"firebase/firestore\";import{useAuth}from\"../hooks/useAuth\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Cart=()=>{const[cart,setCart]=useState({});const[total,setTotal]=useState(0);const[timeLeft,setTimeLeft]=useState(null);const{user}=useAuth();const timerRef=useRef(null);const navigate=useNavigate();// –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∫–æ—à–∏–∫ –∑ localStorage\nconst loadCart=()=>{const storedCart=JSON.parse(localStorage.getItem(\"cart\"))||{};setCart(storedCart);};useEffect(()=>{loadCart();window.addEventListener(\"focus\",loadCart);return()=>window.removeEventListener(\"focus\",loadCart);},[]);// –û–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –∫–æ—à–∏–∫\nuseEffect(()=>{const newTotal=Object.values(cart).reduce((sum,item)=>sum+item.price*item.quantity,0);setTotal(newTotal);if(Object.keys(cart).length>0){localStorage.setItem(\"cart\",JSON.stringify(cart));}},[cart]);const updateQuantity=(id,quantity)=>{if(isNaN(quantity))return;const updatedCart={...cart};if(quantity<=0){delete updatedCart[id];}else{updatedCart[id].quantity=quantity;updatedCart[id].timestamp=Date.now();}setCart(updatedCart);localStorage.setItem(\"cart\",JSON.stringify(updatedCart));};const checkout=async()=>{if(!user){alert(\"–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.\");return navigate(\"/login\");}if(Object.keys(cart).length===0){alert(\"–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π.\");return;}console.log(\"üì§ –ù–∞–¥—Å–∏–ª–∞—î–º–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\",{userId:user.uid,items:cart});try{const response=await fetch(\"http://localhost:5001/api/orders\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({userId:user.uid,items:cart})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||\"–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.\");}const result=await response.json();console.log(\"üì• –û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞:\",result);console.log(\"‚úÖ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:\",result);alert(\"–î—è–∫—É—î–º–æ! –í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ.\");setCart({});localStorage.removeItem(\"cart\");}catch(error){console.error(\"‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\",error);alert(\"–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è: \"+error.message);}};// –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ—à–∏–∫–∞ –º—ñ–∂ –≤–∫–ª–∞–¥–∫–∞–º–∏\nuseEffect(()=>{const handleStorageChange=e=>{if(e.key===\"cart\"){setCart(JSON.parse(e.newValue)||{});}};window.addEventListener(\"storage\",handleStorageChange);return()=>window.removeEventListener(\"storage\",handleStorageChange);},[]);// –¢–∞–π–º–µ—Ä –∑ –æ—á–∏—â–µ–Ω–Ω—è–º —á–µ—Ä–µ–∑ 15 —Å–µ–∫\nuseEffect(()=>{if(Object.keys(cart).length===0){setTimeLeft(null);return;}setTimeLeft(15);if(timerRef.current)clearInterval(timerRef.current);timerRef.current=setInterval(()=>{setTimeLeft(prev=>{if(prev===1){clearInterval(timerRef.current);setCart({});localStorage.removeItem(\"cart\");return null;}return prev-1;});},1000);return()=>clearInterval(timerRef.current);},[cart]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDED2 \\u0412\\u0430\\u0448 \\u043A\\u043E\\u0448\\u0438\\u043A\"}),timeLeft!==null&&/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[\"\\u23F3 \\u0417\\u0430\\u043B\\u0438\\u0448\\u0438\\u043B\\u043E\\u0441\\u044C \\u0447\\u0430\\u0441\\u0443 \\u0434\\u043B\\u044F \\u043E\\u0444\\u043E\\u0440\\u043C\\u043B\\u0435\\u043D\\u043D\\u044F: \",timeLeft,\" \\u0441\\u0435\\u043A.\"]}),Object.keys(cart).length===0?/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041A\\u043E\\u0448\\u0438\\u043A \\u043F\\u043E\\u0440\\u043E\\u0436\\u043D\\u0456\\u0439. \\u041F\\u0435\\u0440\\u0435\\u0439\\u0434\\u0456\\u0442\\u044C \\u0443 \",/*#__PURE__*/_jsx(\"a\",{href:\"/catalog\",children:\"\\u043A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"}),\", \\u0449\\u043E\\u0431 \\u0434\\u043E\\u0434\\u0430\\u0442\\u0438 \\u043A\\u043D\\u0438\\u0433\\u0438.\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u0456\\u043B\\u044C\\u043A\\u0456\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0426\\u0456\\u043D\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u0443\\u043C\\u0430\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:Object.entries(cart).map(_ref=>{let[id,item]=_ref;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.title}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:item.quantity,onChange:e=>updateQuantity(id,parseInt(e.target.value,10))})}),/*#__PURE__*/_jsxs(\"td\",{children:[item.price,\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[item.price*item.quantity,\" \\u0433\\u0440\\u043D\"]})]},id);})})]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u0420\\u0430\\u0437\\u043E\\u043C: \",total,\" \\u0433\\u0440\\u043D\"]}),user?/*#__PURE__*/_jsx(\"button\",{onClick:checkout,children:\"\\u2705 \\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u0438 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/login\"),style:{backgroundColor:\"#ccc\"},children:\"\\uD83D\\uDD10 \\u0423\\u0432\\u0456\\u0439\\u0434\\u0456\\u0442\\u044C, \\u0449\\u043E\\u0431 \\u043E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u0438 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"})]})]});};export default Cart;","map":{"version":3,"names":["React","useEffect","useState","useRef","useNavigate","auth","db","addDoc","collection","serverTimestamp","useAuth","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","cart","setCart","total","setTotal","timeLeft","setTimeLeft","user","timerRef","navigate","loadCart","storedCart","JSON","parse","localStorage","getItem","window","addEventListener","removeEventListener","newTotal","Object","values","reduce","sum","item","price","quantity","keys","length","setItem","stringify","updateQuantity","id","isNaN","updatedCart","timestamp","Date","now","checkout","alert","console","log","userId","uid","items","response","fetch","method","headers","body","ok","errorData","json","Error","error","result","removeItem","message","handleStorageChange","e","key","newValue","current","clearInterval","setInterval","prev","children","style","color","href","entries","map","_ref","title","type","min","value","onChange","parseInt","target","onClick","backgroundColor"],"sources":["/Users/andrijzuk/AndriZhok.github.io/lab5/client/src/components/Cart.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { auth, db } from \"../firebase/firebase\";\nimport { addDoc, collection, serverTimestamp } from \"firebase/firestore\";\nimport { useAuth } from \"../hooks/useAuth\";\n\nconst Cart = () => {\n  const [cart, setCart] = useState({});\n  const [total, setTotal] = useState(0);\n  const [timeLeft, setTimeLeft] = useState(null);\n  const { user } = useAuth();\n  const timerRef = useRef(null);\n  const navigate = useNavigate();\n\n  // –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î–º–æ –∫–æ—à–∏–∫ –∑ localStorage\n  const loadCart = () => {\n    const storedCart = JSON.parse(localStorage.getItem(\"cart\")) || {};\n    setCart(storedCart);\n  };\n\n  useEffect(() => {\n    loadCart();\n    window.addEventListener(\"focus\", loadCart);\n    return () => window.removeEventListener(\"focus\", loadCart);\n  }, []);\n\n  // –û–Ω–æ–≤–ª—é—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É —Å—É–º—É —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –∫–æ—à–∏–∫\n  useEffect(() => {\n    const newTotal = Object.values(cart).reduce(\n      (sum, item) => sum + item.price * item.quantity,\n      0\n    );\n    setTotal(newTotal);\n\n    if (Object.keys(cart).length > 0) {\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n    }\n  }, [cart]);\n\n  const updateQuantity = (id, quantity) => {\n    if (isNaN(quantity)) return;\n\n    const updatedCart = { ...cart };\n\n    if (quantity <= 0) {\n      delete updatedCart[id];\n    } else {\n      updatedCart[id].quantity = quantity;\n      updatedCart[id].timestamp = Date.now();\n    }\n\n    setCart(updatedCart);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n  };\n\n  const checkout = async () => {\n    if (!user) {\n      alert(\"–ë—É–¥—å –ª–∞—Å–∫–∞, —É–≤—ñ–π–¥—ñ—Ç—å –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.\");\n      return navigate(\"/login\");\n    }\n\n    if (Object.keys(cart).length === 0) {\n      alert(\"–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π.\");\n      return;\n    }\n\n    console.log(\"üì§ –ù–∞–¥—Å–∏–ª–∞—î–º–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\", {\n      userId: user.uid,\n      items: cart,\n    });\n\n    try {\n      const response = await fetch(\"http://localhost:5001/api/orders\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          userId: user.uid,\n          items: cart,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || \"–ü–æ–º–∏–ª–∫–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è.\");\n      }\n\n      const result = await response.json();\n      console.log(\"üì• –û—Ç—Ä–∏–º–∞–Ω–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ —Å–µ—Ä–≤–µ—Ä–∞:\", result);\n      console.log(\"‚úÖ –ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –∑–±–µ—Ä–µ–∂–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ:\", result);\n\n      alert(\"–î—è–∫—É—î–º–æ! –í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ.\");\n      setCart({});\n      localStorage.removeItem(\"cart\");\n    } catch (error) {\n      console.error(\"‚ùå –ü–æ–º–∏–ª–∫–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è:\", error);\n      alert(\"–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è: \" + error.message);\n    }\n  };\n\n  // –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ—à–∏–∫–∞ –º—ñ–∂ –≤–∫–ª–∞–¥–∫–∞–º–∏\n  useEffect(() => {\n    const handleStorageChange = (e) => {\n      if (e.key === \"cart\") {\n        setCart(JSON.parse(e.newValue) || {});\n      }\n    };\n\n    window.addEventListener(\"storage\", handleStorageChange);\n    return () => window.removeEventListener(\"storage\", handleStorageChange);\n  }, []);\n\n  // –¢–∞–π–º–µ—Ä –∑ –æ—á–∏—â–µ–Ω–Ω—è–º —á–µ—Ä–µ–∑ 15 —Å–µ–∫\n  useEffect(() => {\n    if (Object.keys(cart).length === 0) {\n      setTimeLeft(null);\n      return;\n    }\n\n    setTimeLeft(15);\n    if (timerRef.current) clearInterval(timerRef.current);\n\n    timerRef.current = setInterval(() => {\n      setTimeLeft((prev) => {\n        if (prev === 1) {\n          clearInterval(timerRef.current);\n          setCart({});\n          localStorage.removeItem(\"cart\");\n          return null;\n        }\n        return prev - 1;\n      });\n    }, 1000);\n\n    return () => clearInterval(timerRef.current);\n  }, [cart]);\n\n  return (\n    <div>\n      <h1>üõí –í–∞—à –∫–æ—à–∏–∫</h1>\n\n      {timeLeft !== null && (\n        <p style={{ color: \"red\" }}>\n          ‚è≥ –ó–∞–ª–∏—à–∏–ª–æ—Å—å —á–∞—Å—É –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è: {timeLeft} —Å–µ–∫.\n        </p>\n      )}\n\n      {Object.keys(cart).length === 0 ? (\n        <p>\n          –ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π. –ü–µ—Ä–µ–π–¥—ñ—Ç—å —É <a href=\"/catalog\">–∫–∞—Ç–∞–ª–æ–≥</a>, —â–æ–± –¥–æ–¥–∞—Ç–∏\n          –∫–Ω–∏–≥–∏.\n        </p>\n      ) : (\n        <>\n          <table>\n            <thead>\n              <tr>\n                <th>–ù–∞–∑–≤–∞</th>\n                <th>–ö—ñ–ª—å–∫—ñ—Å—Ç—å</th>\n                <th>–¶—ñ–Ω–∞</th>\n                <th>–°—É–º–∞</th>\n              </tr>\n            </thead>\n            <tbody>\n              {Object.entries(cart).map(([id, item]) => (\n                <tr key={id}>\n                  <td>{item.title}</td>\n                  <td>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      value={item.quantity}\n                      onChange={(e) =>\n                        updateQuantity(id, parseInt(e.target.value, 10))\n                      }\n                    />\n                  </td>\n                  <td>{item.price} –≥—Ä–Ω</td>\n                  <td>{item.price * item.quantity} –≥—Ä–Ω</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          <h3>–†–∞–∑–æ–º: {total} –≥—Ä–Ω</h3>\n          {user ? (\n            <button onClick={checkout}>‚úÖ –û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>\n          ) : (\n            <button onClick={() => navigate(\"/login\")} style={{ backgroundColor: \"#ccc\" }}>\n              üîê –£–≤—ñ–π–¥—ñ—Ç—å, —â–æ–± –æ—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è\n            </button>\n          )}\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default Cart;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}